import re
def rjsmin(script):
    """ Minify js with a clever regex.
    Taken from http://opensource.perlig.de/rjsmin
    Apache License, Version 2.0 """
    def subber(match):
        """ Substitution callback """
        groups = match.groups()
        print groups
        return (
            groups[0] or
            groups[1] or
            groups[2] or
            groups[3] or
            (groups[4] and '\n') or
            (groups[5] and ' ') or
            (groups[6] and ' ') or
            (groups[7] and ' ') or
            ''
        )

    # result = re.sub(
    #     r'([^\047"/\000-\040]+)|((?:(?:\047[^\047\\\r\n]*(?:\\(?:[^\r\n]|\r?\n|\r)[^\047\\\r\n]*)*\047)|(?:"[^"\\\r\n]*(?:\\(?:[^\r\n]|\r?\n|\r)[^"\\\r\n]*)*"))[^\047"/\000-\040]*)|(?:(?<=[(,=:\[!&|?{};\r\n])(?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/))*((?:/(?![\r\n/*])[^/\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*(?:\\[^\r\n][^\\\]\r\n]*)*\]))[^/\\\[\r\n]*)*/)[^\047"/\000-\040]*))|(?:(?<=[\000-#%-,./:-@\[-^`{-~-]return)(?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/))*((?:/(?![\r\n/*])[^/\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*(?:\\[^\r\n][^\\\]\r\n]*)*\]))[^/\\\[\r\n]*)*/)[^\047"/\000-\040]*))|(?<=[^\000-!#%&(*,./:-@\[\\^`{|~])(?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/))*(?:((?:(?://[^\r\n]*)?[\r\n]))(?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/))*)+(?=[^\000-\040"#%-\047)*,./:-@\\-^`|-~])|(?<=[^\000-#%-,./:-@\[-^`{-~-])((?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/)))+(?=[^\000-#%-,./:-@\[-^`{-~-])|(?<=\+)((?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/)))+(?=\+)|(?<=-)((?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/)))+(?=-)|(?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/))+|(?:(?:(?://[^\r\n]*)?[\r\n])(?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/))*)+'
    #     , subber, script
    # ).strip()
    result = re.sub(
        r'([^\047"/\000-\040]+)|((?:(?:\047[^\047\\\r\n]*(?:\\(?:[^\r\n]|\r?'
        r'\n|\r)[^\047\\\r\n]*)*\047)|(?:"[^"\\\r\n]*(?:\\(?:[^\r\n]|\r?\n|'
        r'\r)[^"\\\r\n]*)*"))[^\047"/\000-\040]*)|(?:(?<=[(,=:\[!&|?{};\r\n]'
        r')(?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/'
        r'))*((?:/(?![\r\n/*])[^/\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*'
        r'(?:\\[^\r\n][^\\\]\r\n]*)*\]))[^/\\\[\r\n]*)*/)[^\047"/\000-\040]*'
        r'))|(?:(?<=[\000-#%-,./:-@\[-^`{-~-]return)(?:[\000-\011\013\014\01'
        r'6-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/))*((?:/(?![\r\n/*])[^/'
        r'\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*(?:\\[^\r\n][^\\\]\r\n]'
        r'*)*\]))[^/\\\[\r\n]*)*/)[^\047"/\000-\040]*))|(?<=[^\000-!#%&(*,./'
        r':-@\[\\^`{|~])(?:[\000-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/'
        r'*][^*]*\*+)*/))*(?:((?:(?://[^\r\n]*)?[\r\n]))(?:[\000-\011\013\01'
        r'4\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/))*)+(?=[^\000-\040"#'
        r'%-\047)*,./:-@\\-^`|-~])|(?<=[^\000-#%-,./:-@\[-^`{-~-])((?:[\000-'
        r'\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/)))+(?=[^'
        r'\000-#%-,./:-@\[-^`{-~-])|(?<=\+)((?:[\000-\011\013\014\016-\040]|'
        r'(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/)))+(?=\+)|(?<=-)((?:[\000-\011\0'
        r'13\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/)))+(?=-)|(?:[\0'
        r'00-\011\013\014\016-\040]|(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/))+|(?:'
        r'(?:(?://[^\r\n]*)?[\r\n])(?:[\000-\011\013\014\016-\040]|(?:/\*[^*'
        r']*\*+(?:[^/*][^*]*\*+)*/))*)+', subber, '\n%s\n' % script
    ).strip()
    return result
"""
0 -> 1
"""

print rjsmin("""
function(self,users){
                    self.users = users;

                }
""")

"""
var regex = /([^\047\"/\000-\040]+)|((?:(?:\047[^\047\\\r\n]*(?:\\(?:[^\r\n]|\r?\n|\r)[^\047\\\r\n]*)*\047)|(?:\"[^\"\\\r\n]*(?:\\(?:[^\r\n]|\r?\n|\r)[^\"\\\r\n]*)*\"))[^\047\"/\000-\040]*)|(?:(?<=[(,=:\[!&|?{};\r\n])(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*((?:\/(?![\r\n/*])[^/\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*(?:\\[^\r\n][^\\\]\r\n]*)*\]))[^/\\\[\r\n]*)*\/)[^\047\"/\000-\040]*))|(?:(?<=[\000-#%-,./:-@\[-^`{-~-]return)(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*((?:\/(?![\r\n/*])[^/\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*(?:\\[^\r\n][^\\\]\r\n]*)*\]))[^/\\\[\r\n]*)*\/)[^\047\"/\000-\040]*))|(?<=[^\000-!#%&(*,./:-@\[\\^`{|~])(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*(?:((?:(?:\/\/[^\r\n]*)?[\r\n]))(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*)+(?=[^\000-\040\"#%-\047)*,./:-@\\-^`|-~])|(?<=[^\000-#%-,./:-@\[-^`{-~-])((?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/)))+(?=[^\000-#%-,./:-@\[-^`{-~-])|(?<=\+)((?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/)))+(?=\+)|(?<=-)((?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/)))+(?=-)|(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))+|(?:(?:(?:\/\/[^\r\n]*)?[\r\n])(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*)+/gm
"""
"""
var regex = /(?<g0>[^\047\"/\000-\040]+)|(?<g1>(?:(?:\047[^\047\\\r\n]*(?:\\(?:[^\r\n]|\r?\n|\r)[^\047\\\r\n]*)*\047)|(?:\"[^\"\\\r\n]*(?:\\(?:[^\r\n]|\r?\n|\r)[^\"\\\r\n]*)*\"))[^\047\"/\000-\040]*)|(?<g2>:(?<=[(,=:\[!&|?{};\r\n])(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*((?:\/(?![\r\n/*])[^/\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*(?:\\[^\r\n][^\\\]\r\n]*)*\]))[^/\\\[\r\n]*)*\/)[^\047\"/\000-\040]*))|(?<g3>:(?<=[\000-#%-,./:-@\[-^`{-~-]return)(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*((?:\/(?![\r\n/*])[^/\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*(?:\\[^\r\n][^\\\]\r\n]*)*\]))[^/\\\[\r\n]*)*\/)[^\047\"/\000-\040]*))|(?<g4><=[^\000-!#%&(*,./:-@\[\\^`{|~])(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*(?:((?:(?:\/\/[^\r\n]*)?[\r\n]))(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*)+(?=[^\000-\040\"#%-\047)*,./:-@\\-^`|-~])|(?<g5><=[^\000-#%-,./:-@\[-^`{-~-])((?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/)))+(?=[^\000-#%-,./:-@\[-^`{-~-])|(?<g6><=\+)((?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/)))+(?=\+)|(?<g7><=-)((?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/)))+(?=-)|(?<g8>:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))+|(?:(?:(?:\/\/[^\r\n]*)?[\r\n])(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*)+/gm
"""

"""
var regex = /(?<g0>[^\047\"/\000-\040]+)|(?<g1>(?:(?:\047[^\047\\\r\n]*(?:\\(?:[^\r\n]|\r?\n|\r)[^\047\\\r\n]*)*\047)|(?:\"[^\"\\\r\n]*(?:\\(?:[^\r\n]|\r?\n|\r)[^\"\\\r\n]*)*\"))[^\047\"/\000-\040]*)|(?<g2>:(?<=[(,=:\[!&|?{};\r\n])(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*((?:\/(?![\r\n/*])[^/\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*(?:\\[^\r\n][^\\\]\r\n]*)*\]))[^/\\\[\r\n]*)*\/)[^\047\"/\000-\040]*))|(?<g3>:(?<=[\000-#%-,./:-@\[-^`{-~-]return)(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*((?:\/(?![\r\n/*])[^/\\\[\r\n]*(?:(?:\\[^\r\n]|(?:\[[^\\\]\r\n]*(?:\\[^\r\n][^\\\]\r\n]*)*\]))[^/\\\[\r\n]*)*\/)[^\047\"/\000-\040]*))|(?<g4><=[^\000-!#%&(*,./:-@\[\\^`{|~])(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*(?:((?:(?:\/\/[^\r\n]*)?[\r\n]))(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*)+(?=[^\000-\040\"#%-\047)*,./:-@\\-^`|-~])|(?<g5><=[^\000-#%-,./:-@\[-^`{-~-])((?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/)))+(?=[^\000-#%-,./:-@\[-^`{-~-])|(?<g6><=\+)((?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/)))+(?=\+)|(?<g7><=-)((?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/)))+(?=-)|(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))+|(?:(?:(?:\/\/[^\r\n]*)?[\r\n])(?:[\000-\011\013\014\016-\040]|(?:\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\/))*)+/
"""